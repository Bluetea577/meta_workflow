########################################################################
####      _        __  ___  __   __ __  __ _____ _______   __       ####
####     | |      |  \/  | \ \ / / |  \/  |  __|__   __| / _ \      ####
####     | |      | |\/| |  \ V /  | |\/| | |__   | |   / /_\ \     ####
####     | |___   | |  | |   | |   | |  | |  __|  | |  / /   \ \    ####
####     |_____|  |_|  |_|   |_|   |_|  |_|_____| |_| /_/     \ \   ####
####                                                                ####
####                      宏基因组分析workflow                        ####
########################################################################
threads: 8
mem: 56
simplejob_mem: 10
simplejob_threads: 4

minimum_contig_length: 1000

runtime: #in h
  default: 5
  assembly: 48
  long: 24
  simplejob: 1

path:
  user_root:
    ../
  meta_path:
    meta_run/
  sra_path:
    sra
  clean_path:
    clean
  assembly_path:
    assembly
  binning_path:
    binning
  gtdbtk_path:
    gtdbtk
  prokka_path:
    prokka

samples:
  id: id.txt

dbs:
  human: ../../DB/hg37

database_dir: ../../DB

###################
# Clean
###################
# kneaddata
kneaddata_opt:
  trimmomatic: "'ILLUMINACLIP:/TruSeq3-SE.fa:2:30:10:8:true SLIDINGWINDOW:4:20 MINLEN:50'"

###################
# Assembly
###################
# megahit_set
megahit_min_count: 2
megahit_k_min: 21
megahit_k_max: 121
megahit_k_step: 20
megahit_merge_level: 20,0.98
megahit_prune_level: 2
megahit_low_local_ratio: 0.2

assembly_threads: 8
assembly_memory: 28
assembly_runtime: 48 #h

minimum_map_quality: 0

####################
# Metabat2
####################
metabat:
  min_contig_length: 1500 # metabat needs >1500
  sensitivity: sensitive

genome_filter_criteria: "(Completeness >= 50) & (Contamination <= 10) & (Completeness-5*Contamination >= 50 ) & (Length_scaffolds >=50000) & (Ambigious_bases <1e6) & (N50 > 5*1e3) & (N_scaffolds < 1e3)"

filter_chimieric_bins: true # filter chimeric bins using GUNC

####################
# Drep
####################
drep:
  min_completeness: 50         # 最小完整度
  max_contamination: 10        # 最大污染度
  primary_ani: 0.9           # 一级聚类ANI阈值
  final_ani: 0.95          # 二级聚类ANI阈值
  coverage_threshold: 0.3      # 覆盖度阈值
  # extra: "--S_algorithm fastANI"  # 使用fastANI进行二级聚类

genome_dereplication:
  ANI: 0.95 # Genome dreplication threshold 0.95 is more or less species
  overlap: 0.2

####################
# gtdbtk
####################
mash_mode: "--skip_ani_screen"    # or "--mash_db /path/to/db"